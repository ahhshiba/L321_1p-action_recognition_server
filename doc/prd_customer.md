# 產品需求文件 (PRD) - 客戶版

## AI Hub - 智慧視覺串流平台

---

## 1. 產品概述

### 1.1 產品簡介

**AI Hub** 是一套以影像串流處理為核心的智慧視覺平台。系統提供完整的多路視訊串流管理、轉碼、分發能力，並基於這個串流基礎設施，支援靈活擴展各種智慧應用功能。

### 1.2 核心價值

- **專業的串流處理能力**：支援 RTSP、HLS 多協議串流，提供低延遲、高品質的影像傳輸
- **靈活的功能擴展**：基於模組化架構，可按需啟用 AI 偵測、智慧告警、事件錄影等功能
- **簡單易用**：一鍵部署，現代化 Web 介面操作，無需複雜配置
- **企業級穩定性**：7×24 小時穩定運行，自動故障恢復

### 1.3 適用場景

- **安全監控**：辦公室、工廠、商場等場所的智慧監控系統
- **行為分析**：人流統計、區域入侵偵測、異常行為識別
- **智慧城市**：交通監控、公共安全、環境監測
- **零售分析**：客流分析、熱區追蹤、顧客行為研究
- **工業檢測**：生產線監控、品質檢測、安全合規

---

## 2. 核心功能

### 2.1 影像串流管理

#### 多源串流接入
- **目前支援 USB 攝影機**：隨插即用，自動識別設備
- **未來擴充**：將支援網路攝影機 (IP Camera) 與 RTSP 來源
- 自動偵測並配置攝影機參數

#### 智慧轉碼與分發
- **預設優化參數**：針對即時串流優化編碼設定，兼顧畫質與低延遲
- **硬體加速編碼**：支援 Intel VAAPI，大幅降低系統負載
- **多協議輸出**：一路輸入，同時支援 RTSP 與 HLS 輸出，整合至 Web 介面播放

#### 串流播放
- **網頁即時串流**：透過 MSE/HLS 技術在瀏覽器播放即時影像
- **跨平台存取**：無需安裝額外軟體，即可在主流瀏覽器 (Chrome/Edge) 上觀看
- **多人同時監控**：支援多個網頁客戶端同時連線

### 2.2 AI 智慧功能（可選模組）

#### 物件偵測與辨識
- **模型支援**：目前支援 YOLOv8 AI 模型，精準識別人員、車輛等物件
- **即時推論**：偵測結果即時疊加於串流畫面
- **模型熱插拔**：可根據場景需求動態切換 AI 模型

#### 虛擬圍欄告警
- **自定義區域**：在畫面上自由繪製多邊形監控區域
- **智慧觸發**：當指定類別物件（如人員）進入區域時自動觸發
- **即時通知**：支援 MQTT 事件發布，可整合第三方通知系統

#### 行為分析（未來擴充）
- 人員跌倒、打架等異常行為偵測
- 人流密度分析與預警
- 物品遺留或移除偵測

### 2.3 事件管理與錄影

#### 智慧事件記錄
- **完整記錄**：自動記錄所有告警事件，包含時間、類型、位置與影像
- **資料庫存儲**：採用 PostgreSQL 資料庫，確保海量事件資料的高效查詢
- **事件搜尋**：支援按時間、相機、事件類型快速篩選

#### 事件影片裁剪
- **自動剪輯**：事件發生時自動裁剪前後影片片段（如前 10 秒 + 後 10 秒）
- **快速回溯**：無需查看長時間錄影，直接鎖定關鍵時刻
- **儲存優化**：智慧管理儲存空間，優先保留關鍵事件片段

#### 持續錄影（可選）
- 7×24 小時全時段錄影
- 按日期自動分類儲存 (`YYYY-MM/DD/HH-MM-SS.mkv`)
- 支援本地磁碟或掛載網路儲存

### 2.4 Web 管理介面

#### 即時監控儀表板
- **Next.js 現代化架構**：提供流暢、響應式的操作體驗
- **多畫面監控**：即時查看所有攝影機串流與狀態
- **即時事件流**：最新告警事件即時推播顯示

#### 攝影機配置管理
- 圖形化介面新增、編輯攝影機參數
- 直觀的虛擬圍欄繪製工具
- 一鍵啟用/停用 AI 模型與錄影功能

#### 事件與錄影瀏覽
- **視覺化時間軸**：快速定位錄影與事件
- **事件縮圖**：快速預覽事件內容
- **線上播放**：支援直接在瀏覽器播放事件片段與歷史錄影

---

## 3. 產品介面展示

### 3.1 即時監控儀表板

![即時監控儀表板](./doc/ui_dashboard.png)

*即時監控畫面：多畫面監控、串流狀態、事件通知*

<div style="page-break-before: always;"></div>

### 3.2 事件管理介面

![事件管理介面](./doc/ui_events.png)

![事件管理介面](./doc/ui_events2.png)

*事件瀏覽：時間軸、事件縮圖、快速播放*

### 3.3 攝影機配置

![攝影機配置](./doc/ui_camera_config.png)

*攝影機設定：參數配置、虛擬圍欄繪製*


<div style="page-break-before: always;"></div>


### 3.4 狀態檢查

![狀態檢查](./doc/ui_status.png)

*狀態檢查：系統狀態、已使用空間*

### 3.5電子圍籬

![電子圍籬](./doc/ui_fence.png)

*電子圍籬：虛擬圍欄繪製、圍籬設定*

---

## 4. 系統優勢

### 4.1 技術優勢

| 特性 | 說明 |
|------|------|
| **高效能串流** | 支援 Intel VAAPI 硬體加速，單機可高效率處理多路串流 |
| **串流體驗** | 支援標準 RTSP 與 HLS 串流協議，相容性高 |
| **Microservices** | 採用 Docker 微服務架構，各功能獨立運行，穩定性高 |
| **AI 彈性** | 支援 YOLOv8 系列模型，可根據硬體效能調整模型大小 |
| **開放架構** | 基於 MQTT 事件驅動，易於整合第三方 IOT 系統 |

<div style="page-break-before: always;"></div>

### 4.2 部署優勢

- **快速部署**：Docker Compose 一鍵啟動，環境標準化
- **環境兼容**：支援 Linux (Ubuntu/Debian) 環境
- **私有化部署**：數據完全在您的環境內，確保隱私安全
- **彈性擴容**：可根據需求增加硬體資源或橫向擴展

### 4.3 成本優勢

- **按需啟用**：只啟用需要的功能模組，避免資源浪費
- **開源核心**：基於 FFmpeg、OpenCV 等成熟開源技術，無昂貴授權費
- **高性價比**：相比傳統硬體 NVR，提供更多智慧功能與擴展性

---

---

---

**文件版本**: v1.0
**最後更新**: 2025-12-27
